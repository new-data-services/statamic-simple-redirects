const O=window.Vue,{BaseTransition:ve,BaseTransitionPropsValidators:he,Comment:Se,DeprecationTypes:be,EffectScope:Ce,ErrorCodes:ye,ErrorTypeStrings:_e,Fragment:I,KeepAlive:xe,ReactiveEffect:we,Static:ke,Suspense:Te,Teleport:Pe,Text:Re,TrackOpTypes:De,Transition:Ie,TransitionGroup:Ae,TriggerOpTypes:Ue,VueElement:Me,__esModule:Ee,assertNumber:Le,callWithAsyncErrorHandling:$e,callWithErrorHandling:He,camelize:Ve,capitalize:Fe,cloneVNode:Be,compatUtils:Oe,compile:ze,computed:Ge,createApp:Ke,createBlock:C,createCommentVNode:f,createElementBlock:k,createElementVNode:h,createHydrationRenderer:Ne,createPropsRestProxy:je,createRenderer:We,createSSRApp:qe,createSlots:Qe,createStaticVNode:Je,createTextVNode:R,createVNode:t,customRef:Xe,defineAsyncComponent:Ye,defineComponent:Ze,defineCustomElement:et,defineEmits:tt,defineExpose:rt,defineModel:it,defineOptions:at,defineProps:nt,defineSSRCustomElement:lt,defineSlots:ot,devtools:st,effect:dt,effectScope:ct,getCurrentInstance:V,getCurrentScope:ut,getCurrentWatcher:mt,getTransitionRawChildren:pt,guardReactiveProps:gt,h:ft,handleError:vt,hasInjectionContext:ht,hydrate:St,hydrateOnIdle:bt,hydrateOnInteraction:Ct,hydrateOnMediaQuery:yt,hydrateOnVisible:_t,initCustomFormatter:xt,initDirectivesForSSR:wt,inject:kt,isMemoSame:Tt,isProxy:Pt,isReactive:Rt,isReadonly:Dt,isRef:It,isRuntimeOnly:At,isShallow:Ut,isVNode:Mt,markRaw:Et,mergeDefaults:Lt,mergeModels:$t,mergeProps:Ht,nextTick:Vt,nodeOps:Ft,normalizeClass:Bt,normalizeProps:Ot,normalizeStyle:zt,onActivated:Gt,onBeforeMount:Kt,onBeforeUnmount:z,onBeforeUpdate:Nt,onDeactivated:jt,onErrorCaptured:Wt,onMounted:G,onRenderTracked:qt,onRenderTriggered:Qt,onScopeDispose:Jt,onServerPrefetch:Xt,onUnmounted:K,onUpdated:Yt,onWatcherCleanup:Zt,openBlock:c,patchProp:er,popScopeId:tr,provide:rr,proxyRefs:ir,pushScopeId:ar,queuePostFlushCb:nr,reactive:lr,readonly:or,ref:d,registerRuntimeCompiler:sr,render:dr,renderList:cr,renderSlot:ur,resolveComponent:mr,resolveDirective:pr,resolveDynamicComponent:gr,resolveFilter:fr,resolveTransitionHooks:vr,setBlockTracking:hr,setDevtoolsHook:Sr,setTransitionHooks:br,shallowReactive:Cr,shallowReadonly:yr,shallowRef:_r,ssrContextKey:xr,ssrUtils:wr,stop:kr,toDisplayString:y,toHandlerKey:Tr,toHandlers:Pr,toRaw:Rr,toRef:Dr,toRefs:Ir,toValue:Ar,transformVNodeArgs:Ur,triggerRef:Mr,unref:e,useAttrs:Er,useCssModule:Lr,useCssVars:$r,useHost:Hr,useId:Vr,useModel:Fr,useSSRContext:Br,useShadowRoot:Or,useSlots:zr,useTemplateRef:N,useTransitionState:Gr,vModelCheckbox:Kr,vModelDynamic:Nr,vModelRadio:jr,vModelSelect:Wr,vModelText:qr,vShow:Qr,version:Jr,warn:Xr,watch:j,watchEffect:Yr,watchPostEffect:Zr,watchSyncEffect:ei,withAsyncContext:ti,withCtx:n,withDefaults:ri,withDirectives:ii,withKeys:ai,withMemo:ni,withModifiers:li,withScopeId:oi}=O,{Form:si,Head:F,Link:di,router:_,toggleArchitecturalBackground:ci,useArchitecturalBackground:ui,useForm:mi,usePoll:pi}=__STATAMIC__.inertia,{Alert:gi,AuthCard:fi,Avatar:vi,Badge:M,Button:v,ButtonGroup:W,Calendar:hi,Card:Si,CardList:bi,CardListItem:Ci,CardPanel:yi,CharacterCounter:_i,Checkbox:xi,CheckboxGroup:wi,CodeEditor:ki,Combobox:Ti,CommandPaletteItem:Pi,ConfirmationModal:q,Context:Ri,ContextFooter:Di,ContextHeader:Ii,ContextItem:Ai,ContextLabel:Ui,ContextMenu:Mi,ContextSeparator:Ei,CreateForm:Li,DatePicker:$i,DateRangePicker:Hi,Description:Vi,DocsCallout:Fi,DragHandle:Bi,Dropdown:L,DropdownItem:A,DropdownLabel:Q,DropdownMenu:$,DropdownSeparator:Oi,DropdownFooter:zi,DropdownHeader:Gi,Editable:Ki,ErrorMessage:Ni,EmptyStateItem:H,EmptyStateMenu:J,Field:ji,Header:B,Heading:Wi,HoverCard:qi,Icon:X,Input:Qi,InputGroup:Ji,InputGroupAppend:Xi,InputGroupPrepend:Yi,Label:Zi,Listing:Y,ListingCustomizeColumns:ea,ListingFilters:ta,ListingHeaderCell:ra,ListingPagination:ia,ListingPresets:aa,ListingPresetTrigger:na,ListingRowActions:la,ListingSearch:oa,ListingTable:sa,ListingTableBody:da,ListingTableHead:ca,ListingToggleAll:ua,LivePreview:ma,LivePreviewPopout:pa,Modal:ga,ModalClose:fa,ModalTitle:va,Pagination:ha,Panel:Sa,PanelFooter:ba,PanelHeader:Ca,Popover:ya,PublishComponents:_a,PublishContainer:Z,publishContextKey:xa,injectPublishContext:wa,PublishField:ka,PublishFields:Ta,PublishFieldsProvider:Pa,PublishForm:Ra,PublishLocalizations:Da,PublishSections:Ia,PublishTabs:ee,Radio:E,RadioGroup:te,Select:Aa,Separator:Ua,Slider:Ma,Skeleton:Ea,SplitterGroup:La,SplitterPanel:$a,SplitterResizeHandle:Ha,StatusIndicator:re,Subheading:Va,Switch:Fa,TabContent:Ba,Stack:Oa,StackClose:za,StackHeader:Ga,StackFooter:Ka,StackContent:Na,Table:ja,TableCell:Wa,TableColumn:qa,TableColumns:Qa,TableRow:Ja,TableRows:Xa,TabList:Ya,TabProvider:Za,Tabs:en,TabTrigger:tn,Textarea:rn,TimePicker:an,ToggleGroup:nn,ToggleItem:ln,Widget:on,registerIconSet:sn,registerIconSetFromStrings:dn}=__STATAMIC__.ui,ie={class:"flex items-center gap-2"},ae=["href"],ne=["href"],le={class:"py-8 mt-8 text-center"},oe={class:"text-[25px] font-medium antialiased flex justify-center items-center gap-2 sm:gap-3"},se={class:"mt-12 mb-10 flex justify-center text-center"},de="simple-redirects",ce={__name:"Index",props:{title:String,redirects:Array,columns:Array,createUrl:String,reorderUrl:String,actionUrl:String,exportUrl:String,importUrl:String},setup(l){const o=l,p=V(),s=d(!1),m=d(null),T=d(0),x=d(null),P=d(Statamic.$keys.bindGlobal(["mod+s"],i=>{s.value&&(i.preventDefault(),b())}));z(()=>P.value?.destroy());function S(i){m.value=i}function b(){if(!m.value){s.value=!1;return}const i=m.value.map(r=>r.id);p.proxy.$axios.post(o.reorderUrl,{order:i}).then(()=>{Statamic.$toast.success(__("simple-redirects::messages.redirects_reordered")),m.value=null,s.value=!1}).catch(()=>{Statamic.$toast.error(__("simple-redirects::messages.order_save_failed"))})}function g(){m.value=null,s.value=!1,T.value++}function w(){x.value?.click()}function U(i){if(!i.target.files[0])return;Statamic.$progress.start("import");const r=new FormData;r.append("file",i.target.files[0]),p.proxy.$axios.post(o.importUrl,r).then(()=>{Statamic.$toast.success(__("simple-redirects::messages.import_complete")),_.reload()}).catch(()=>{Statamic.$toast.error(__("simple-redirects::messages.import_failed"))}).finally(()=>{Statamic.$progress.complete("import"),i.target.value=""})}return(i,r)=>(c(),k("div",null,[t(e(F),{title:l.title},null,8,["title"]),l.redirects.length?(c(),k(I,{key:0},[t(e(B),{title:l.title,icon:"moved"},{default:n(()=>[s.value?f("",!0):(c(),C(e(L),{key:0},{trigger:n(()=>[t(e(v),{icon:"dots",variant:"ghost","aria-label":i.__("Open dropdown menu")},null,8,["aria-label"])]),default:n(()=>[t(e($),null,{default:n(()=>[t(e(A),{text:i.__("simple-redirects::messages.import_csv"),icon:"upload-arrow-up",onClick:w},null,8,["text"]),t(e(A),{text:i.__("simple-redirects::messages.export_csv"),icon:"download-arrow-down",href:l.exportUrl,target:"_blank",download:""},null,8,["text","href"])]),_:1})]),_:1})),!s.value&&l.redirects.length>1?(c(),C(e(v),{key:1,onClick:r[0]||(r[0]=a=>s.value=!0),text:i.__("Reorder")},null,8,["text"])):f("",!0),s.value?(c(),k(I,{key:2},[t(e(v),{onClick:g,text:i.__("Cancel")},null,8,["text"]),t(e(v),{onClick:b,text:i.__("Save Order"),variant:"primary"},null,8,["text"])],64)):f("",!0),s.value?f("",!0):(c(),C(e(v),{key:3,text:i.__("Create Redirect"),href:l.createUrl,variant:"primary"},null,8,["text","href"]))]),_:1},8,["title"]),(c(),C(e(Y),{key:T.value,items:l.redirects,columns:l.columns,"action-url":l.actionUrl,"preferences-prefix":de,"allow-search":!0,"allow-customizing-columns":!0,"allow-presets":!1,reorderable:s.value,sortable:!1,onReordered:S,onRefreshing:r[1]||(r[1]=a=>e(_).reload())},{"cell-source":n(({row:a,value:u})=>[h("div",ie,[t(e(re),{status:a.enabled?"published":"draft"},null,8,["status"]),h("a",{href:a.edit_url,class:"slug-index-field",style:{"word-break":"break-all"}},y(u),9,ae)])]),"cell-destination":n(({row:a,value:u})=>[h("a",{href:a.edit_url,class:"slug-index-field",style:{"word-break":"break-all"}},y(u),9,ne)]),"cell-sites":n(({value:a})=>[R(y(a),1)]),"cell-regex":n(({value:a})=>[a?(c(),C(e(M),{key:0,size:"sm"},{default:n(()=>[...r[2]||(r[2]=[R("Regex",-1)])]),_:1})):f("",!0)]),"cell-status_code":n(({value:a})=>[t(e(M),{size:"sm"},{default:n(()=>[R(y(a),1)]),_:2},1024)]),"prepended-row-actions":n(({row:a})=>[t(e(A),{text:i.__("Edit"),icon:"pencil",href:a.edit_url},null,8,["text","href"])]),_:1},8,["items","columns","action-url","reorderable"]))],64)):f("",!0),l.redirects.length?f("",!0):(c(),k(I,{key:1},[h("header",le,[h("h1",oe,[t(e(X),{name:"moved",class:"size-5 text-gray-500"}),R(" "+y(l.title),1)])]),t(e(J),{heading:i.__("simple-redirects::messages.redirects_intro")},{default:n(()=>[t(e(H),{href:l.createUrl,icon:"moved",heading:i.__("Create Redirect"),description:i.__("simple-redirects::messages.create_first_redirect")},null,8,["href","heading","description"]),t(e(H),{onClick:w,icon:"upload-arrow-up",heading:i.__("simple-redirects::messages.import_csv"),description:i.__("simple-redirects::messages.import_description")},null,8,["heading","description"])]),_:1},8,["heading"])],64)),h("div",se,[t(e(M),{text:i.__("simple-redirects::messages.learn_about_redirects"),"icon-append":"external-link",href:"https://github.com/new-data-services/statamic-simple-redirects",target:"_blank",pill:""},null,8,["text"])]),h("input",{ref_key:"fileInput",ref:x,type:"file",accept:".csv,text/csv",class:"hidden",onChange:U},null,544)]))}},{AfterSaveHooks:ue,BeforeSaveHooks:me,Pipeline:pe,PipelineStopped:cn,Request:ge}=__STATAMIC__.savePipeline,D="simple-redirects.after_save",fe={__name:"Publish",props:{title:String,icon:String,blueprint:Object,values:Object,meta:Object,submitUrl:String,listingUrl:String,createAnotherUrl:String,deleteUrl:String,isCreating:{type:Boolean,default:!0}},setup(l){const o=l,p=V(),s=N("container"),m=d(o.values),T=d(o.meta),x=d({}),P=d(!1),S=d(!1),b=d(!1),g=d("listing");let w;G(()=>{g.value=p.proxy.$preferences.get(D)||"listing",w=Statamic.$keys.bindGlobal(["mod+s"],r=>{r.preventDefault(),i()})}),K(()=>w?.destroy()),j(g,r=>{r!==p.proxy.$preferences.get(D)&&(r==="listing"?p.proxy.$preferences.remove(D):p.proxy.$preferences.set(D,r))});function U(){b.value=!0,p.proxy.$axios.delete(o.deleteUrl).then(()=>{Statamic.$toast.success(__("simple-redirects::messages.redirect_deleted")),_.visit(o.listingUrl)}).catch(()=>{Statamic.$toast.error(__("Something went wrong")),b.value=!1,S.value=!1})}function i(){new pe().provide({container:s,errors:x,saving:P}).through([new me("redirect",{values:m.value}),new ge(o.submitUrl,o.isCreating?"post":"patch"),new ue("redirect",{isCreating:o.isCreating})]).then(r=>{const a=o.isCreating?__("simple-redirects::messages.redirect_created"):__("simple-redirects::messages.redirect_saved");if(Statamic.$toast.success(a),g.value==="create_another"){_.visit(o.createAnotherUrl);return}if(g.value==="continue_editing"){o.isCreating&&r.data.redirect&&_.visit(r.data.redirect);return}_.visit(o.listingUrl)})}return(r,a)=>(c(),k(I,null,[t(e(F),{title:l.title},null,8,["title"]),t(e(B),{title:l.title,icon:l.icon},{default:n(()=>[l.isCreating?f("",!0):(c(),C(e(L),{key:0,align:"end"},{trigger:n(()=>[t(e(v),{icon:"dots",variant:"ghost","aria-label":r.__("Open dropdown menu")},null,8,["aria-label"])]),default:n(()=>[t(e($),null,{default:n(()=>[t(e(A),{text:r.__("Delete"),icon:"trash",variant:"destructive",onClick:a[0]||(a[0]=u=>S.value=!0)},null,8,["text"])]),_:1})]),_:1})),t(e(W),null,{default:n(()=>[t(e(v),{variant:"primary",text:r.__("Save"),disabled:P.value,onClick:i},null,8,["text","disabled"]),t(e(L),{align:"end"},{trigger:n(()=>[t(e(v),{variant:"primary",icon:"chevron-down","aria-label":r.__("Save options")},null,8,["aria-label"])]),default:n(()=>[t(e($),null,{default:n(()=>[t(e(Q),{id:"after-saving-label",textContent:y(r.__("After Saving"))},null,8,["textContent"]),t(e(te),{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=u=>g.value=u),"aria-labelledby":"after-saving-label"},{default:n(()=>[t(e(E),{label:r.__("Go To Listing"),value:"listing"},null,8,["label"]),t(e(E),{label:r.__("Continue Editing"),value:"continue_editing"},null,8,["label"]),t(e(E),{label:r.__("Create Another"),value:"create_another"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","icon"]),t(e(Z),{ref_key:"container",ref:s,name:l.title,blueprint:l.blueprint,meta:T.value,errors:x.value,modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=u=>m.value=u)},{default:n(()=>[t(e(ee))]),_:1},8,["name","blueprint","meta","errors","modelValue"]),t(e(q),{open:S.value,"onUpdate:open":a[3]||(a[3]=u=>S.value=u),title:r.__("Delete"),"body-text":r.__("simple-redirects::messages.delete_confirmation"),"button-text":r.__("Delete"),busy:b.value,danger:"",onConfirm:U},null,8,["open","title","body-text","button-text","busy"])],64))}};Statamic.booting(()=>{Statamic.$inertia.register("simple-redirects::Index",ce),Statamic.$inertia.register("simple-redirects::Publish",fe)});
