const O=window.Vue,{BaseTransition:he,BaseTransitionPropsValidators:Se,Comment:Ce,DeprecationTypes:be,EffectScope:ye,ErrorCodes:_e,ErrorTypeStrings:xe,Fragment:k,KeepAlive:we,ReactiveEffect:ke,Static:Te,Suspense:Pe,Teleport:Re,Text:De,TrackOpTypes:Ie,Transition:Ae,TransitionGroup:Ue,TriggerOpTypes:Me,VueElement:Ee,__esModule:Le,assertNumber:$e,callWithAsyncErrorHandling:He,callWithErrorHandling:Ve,camelize:Fe,capitalize:Be,cloneVNode:Oe,compatUtils:ze,compile:Ge,computed:Ke,createApp:Ne,createBlock:b,createCommentVNode:v,createElementBlock:T,createElementVNode:f,createHydrationRenderer:je,createPropsRestProxy:We,createRenderer:qe,createSSRApp:Qe,createSlots:Je,createStaticVNode:Xe,createTextVNode:D,createVNode:t,customRef:Ye,defineAsyncComponent:Ze,defineComponent:et,defineCustomElement:tt,defineEmits:rt,defineExpose:it,defineModel:nt,defineOptions:at,defineProps:lt,defineSSRCustomElement:ot,defineSlots:st,devtools:dt,effect:ct,effectScope:ut,getCurrentInstance:V,getCurrentScope:mt,getCurrentWatcher:pt,getTransitionRawChildren:gt,guardReactiveProps:ft,h:vt,handleError:ht,hasInjectionContext:St,hydrate:Ct,hydrateOnIdle:bt,hydrateOnInteraction:yt,hydrateOnMediaQuery:_t,hydrateOnVisible:xt,initCustomFormatter:wt,initDirectivesForSSR:kt,inject:Tt,isMemoSame:Pt,isProxy:Rt,isReactive:Dt,isReadonly:It,isRef:At,isRuntimeOnly:Ut,isShallow:Mt,isVNode:Et,markRaw:Lt,mergeDefaults:$t,mergeModels:Ht,mergeProps:Vt,nextTick:Ft,nodeOps:Bt,normalizeClass:Ot,normalizeProps:zt,normalizeStyle:Gt,onActivated:Kt,onBeforeMount:Nt,onBeforeUnmount:z,onBeforeUpdate:jt,onDeactivated:Wt,onErrorCaptured:qt,onMounted:G,onRenderTracked:Qt,onRenderTriggered:Jt,onScopeDispose:Xt,onServerPrefetch:Yt,onUnmounted:K,onUpdated:Zt,onWatcherCleanup:er,openBlock:c,patchProp:tr,popScopeId:rr,provide:ir,proxyRefs:nr,pushScopeId:ar,queuePostFlushCb:lr,reactive:or,readonly:sr,ref:d,registerRuntimeCompiler:dr,render:cr,renderList:ur,renderSlot:mr,resolveComponent:pr,resolveDirective:gr,resolveDynamicComponent:fr,resolveFilter:vr,resolveTransitionHooks:hr,setBlockTracking:Sr,setDevtoolsHook:Cr,setTransitionHooks:br,shallowReactive:yr,shallowReadonly:_r,shallowRef:xr,ssrContextKey:wr,ssrUtils:kr,stop:Tr,toDisplayString:y,toHandlerKey:Pr,toHandlers:Rr,toRaw:Dr,toRef:Ir,toRefs:Ar,toValue:Ur,transformVNodeArgs:Mr,triggerRef:Er,unref:e,useAttrs:Lr,useCssModule:$r,useCssVars:Hr,useHost:Vr,useId:Fr,useModel:Br,useSSRContext:Or,useShadowRoot:zr,useSlots:Gr,useTemplateRef:N,useTransitionState:Kr,vModelCheckbox:Nr,vModelDynamic:jr,vModelRadio:Wr,vModelSelect:qr,vModelText:Qr,vShow:Jr,version:Xr,warn:Yr,watch:j,watchEffect:Zr,watchPostEffect:ei,watchSyncEffect:ti,withAsyncContext:ri,withCtx:a,withDefaults:ii,withDirectives:ni,withKeys:ai,withMemo:li,withModifiers:oi,withScopeId:si}=O,{Form:di,Head:F,Link:ci,router:_,toggleArchitecturalBackground:ui,useArchitecturalBackground:mi,useForm:pi,usePoll:gi}=__STATAMIC__.inertia,{Alert:fi,AuthCard:vi,Avatar:hi,Badge:M,Button:h,ButtonGroup:W,Calendar:Si,Card:Ci,CardList:bi,CardListItem:yi,CardPanel:_i,CharacterCounter:xi,Checkbox:wi,CheckboxGroup:ki,CodeEditor:Ti,Combobox:Pi,CommandPaletteItem:Ri,ConfirmationModal:q,Context:Di,ContextFooter:Ii,ContextHeader:Ai,ContextItem:Ui,ContextLabel:Mi,ContextMenu:Ei,ContextSeparator:Li,CreateForm:$i,DatePicker:Hi,DateRangePicker:Vi,Description:Fi,DocsCallout:Bi,DragHandle:Oi,Dropdown:L,DropdownItem:A,DropdownLabel:Q,DropdownMenu:$,DropdownSeparator:zi,DropdownFooter:Gi,DropdownHeader:Ki,Editable:Ni,ErrorMessage:ji,EmptyStateItem:H,EmptyStateMenu:J,Field:Wi,Header:B,Heading:qi,HoverCard:Qi,Icon:X,Input:Ji,InputGroup:Xi,InputGroupAppend:Yi,InputGroupPrepend:Zi,Label:en,Listing:Y,ListingCustomizeColumns:tn,ListingFilters:rn,ListingHeaderCell:nn,ListingPagination:an,ListingPresets:ln,ListingPresetTrigger:on,ListingRowActions:sn,ListingSearch:dn,ListingTable:cn,ListingTableBody:un,ListingTableHead:mn,ListingToggleAll:pn,LivePreview:gn,LivePreviewPopout:fn,Modal:vn,ModalClose:hn,ModalTitle:Sn,Pagination:Cn,Panel:bn,PanelFooter:yn,PanelHeader:_n,Popover:xn,PublishComponents:wn,PublishContainer:Z,publishContextKey:kn,injectPublishContext:Tn,PublishField:Pn,PublishFields:Rn,PublishFieldsProvider:Dn,PublishForm:In,PublishLocalizations:An,PublishSections:Un,PublishTabs:ee,Radio:E,RadioGroup:te,Select:Mn,Separator:En,Slider:Ln,Skeleton:$n,SplitterGroup:Hn,SplitterPanel:Vn,SplitterResizeHandle:Fn,StatusIndicator:re,Subheading:Bn,Switch:On,TabContent:zn,Stack:Gn,StackClose:Kn,StackHeader:Nn,StackFooter:jn,StackContent:Wn,Table:qn,TableCell:Qn,TableColumn:Jn,TableColumns:Xn,TableRow:Yn,TableRows:Zn,TabList:ea,TabProvider:ta,Tabs:ra,TabTrigger:ia,Textarea:na,TimePicker:aa,ToggleGroup:la,ToggleItem:oa,Widget:sa,registerIconSet:da,registerIconSetFromStrings:ca}=__STATAMIC__.ui,ie={class:"max-w-6xl mx-auto"},ne={class:"flex items-center gap-2"},ae=["href"],le=["href"],oe={class:"py-8 mt-8 text-center"},se={class:"text-[25px] font-medium antialiased flex justify-center items-center gap-2 sm:gap-3"},de={class:"mt-12 mb-10 flex justify-center text-center"},ce="simple-redirects",ue={__name:"Index",props:{title:String,redirects:Array,columns:Array,createUrl:String,reorderUrl:String,actionUrl:String,exportUrl:String,importUrl:String},setup(l){const o=l,p=V(),s=d(!1),m=d(null),P=d(0),x=d(null),R=d(Statamic.$keys.bindGlobal(["mod+s"],i=>{s.value&&(i.preventDefault(),C())}));z(()=>R.value?.destroy());function S(i){m.value=i}function C(){if(!m.value){s.value=!1;return}const i=m.value.map(r=>r.id);p.proxy.$axios.post(o.reorderUrl,{order:i}).then(()=>{Statamic.$toast.success(__("simple-redirects::messages.redirects_reordered")),m.value=null,s.value=!1}).catch(()=>{Statamic.$toast.error(__("simple-redirects::messages.order_save_failed"))})}function g(){m.value=null,s.value=!1,P.value++}function w(){x.value?.click()}function U(i){if(!i.target.files[0])return;Statamic.$progress.start("import");const r=new FormData;r.append("file",i.target.files[0]),p.proxy.$axios.post(o.importUrl,r).then(()=>{Statamic.$toast.success(__("simple-redirects::messages.import_complete")),_.reload()}).catch(()=>{Statamic.$toast.error(__("simple-redirects::messages.import_failed"))}).finally(()=>{Statamic.$progress.complete("import"),i.target.value=""})}return(i,r)=>(c(),T(k,null,[t(e(F),{title:l.title},null,8,["title"]),f("div",ie,[l.redirects.length?(c(),T(k,{key:0},[t(e(B),{title:l.title,icon:"moved"},{default:a(()=>[s.value?v("",!0):(c(),b(e(L),{key:0},{trigger:a(()=>[t(e(h),{icon:"dots",variant:"ghost","aria-label":i.__("Open dropdown menu")},null,8,["aria-label"])]),default:a(()=>[t(e($),null,{default:a(()=>[t(e(A),{text:i.__("simple-redirects::messages.import_csv"),icon:"upload-arrow-up",onClick:w},null,8,["text"]),t(e(A),{text:i.__("simple-redirects::messages.export_csv"),icon:"download-arrow-down",href:l.exportUrl,target:"_blank",download:""},null,8,["text","href"])]),_:1})]),_:1})),!s.value&&l.redirects.length>1?(c(),b(e(h),{key:1,onClick:r[0]||(r[0]=n=>s.value=!0),text:i.__("Reorder")},null,8,["text"])):v("",!0),s.value?(c(),T(k,{key:2},[t(e(h),{onClick:g,text:i.__("Cancel")},null,8,["text"]),t(e(h),{onClick:C,text:i.__("Save Order"),variant:"primary"},null,8,["text"])],64)):v("",!0),s.value?v("",!0):(c(),b(e(h),{key:3,text:i.__("Create Redirect"),href:l.createUrl,variant:"primary"},null,8,["text","href"]))]),_:1},8,["title"]),(c(),b(e(Y),{key:P.value,items:l.redirects,columns:l.columns,"action-url":l.actionUrl,"preferences-prefix":ce,"allow-search":!0,"allow-customizing-columns":!0,"allow-presets":!1,reorderable:s.value,sortable:!1,onReordered:S,onRefreshing:r[1]||(r[1]=n=>e(_).reload())},{"cell-source":a(({row:n,value:u})=>[f("div",ne,[t(e(re),{status:n.enabled?"published":"draft"},null,8,["status"]),f("a",{href:n.edit_url,class:"slug-index-field"},y(u),9,ae)])]),"cell-destination":a(({row:n,value:u})=>[f("a",{href:n.edit_url,class:"slug-index-field"},y(u),9,le)]),"cell-sites":a(({value:n})=>[D(y(n),1)]),"cell-regex":a(({value:n})=>[n?(c(),b(e(M),{key:0,size:"sm"},{default:a(()=>[...r[2]||(r[2]=[D("Regex",-1)])]),_:1})):v("",!0)]),"cell-status_code":a(({value:n})=>[t(e(M),{size:"sm"},{default:a(()=>[D(y(n),1)]),_:2},1024)]),"prepended-row-actions":a(({row:n})=>[t(e(A),{text:i.__("Edit"),icon:"pencil",href:n.edit_url},null,8,["text","href"])]),_:1},8,["items","columns","action-url","reorderable"]))],64)):v("",!0),l.redirects.length?v("",!0):(c(),T(k,{key:1},[f("header",oe,[f("h1",se,[t(e(X),{name:"moved",class:"size-5 text-gray-500"}),D(" "+y(l.title),1)])]),t(e(J),{heading:i.__("simple-redirects::messages.redirects_intro")},{default:a(()=>[t(e(H),{href:l.createUrl,icon:"moved",heading:i.__("Create Redirect"),description:i.__("simple-redirects::messages.create_first_redirect")},null,8,["href","heading","description"]),t(e(H),{onClick:w,icon:"upload-arrow-up",heading:i.__("simple-redirects::messages.import_csv"),description:i.__("simple-redirects::messages.import_description")},null,8,["heading","description"])]),_:1},8,["heading"]),f("div",de,[t(e(M),{text:i.__("simple-redirects::messages.learn_about_redirects"),"icon-append":"external-link",href:"https://github.com/new-data-services/statamic-simple-redirects",target:"_blank",pill:""},null,8,["text"])])],64)),f("input",{ref_key:"fileInput",ref:x,type:"file",accept:".csv,text/csv",class:"hidden",onChange:U},null,544)])],64))}},{AfterSaveHooks:me,BeforeSaveHooks:pe,Pipeline:ge,PipelineStopped:ua,Request:fe}=__STATAMIC__.savePipeline,I="simple-redirects.after_save",ve={__name:"Publish",props:{title:String,icon:String,blueprint:Object,values:Object,meta:Object,submitUrl:String,listingUrl:String,createAnotherUrl:String,deleteUrl:String,isCreating:{type:Boolean,default:!0}},setup(l){const o=l,p=V(),s=N("container"),m=d(o.values),P=d(o.meta),x=d({}),R=d(!1),S=d(!1),C=d(!1),g=d("listing");let w;G(()=>{g.value=p.proxy.$preferences.get(I)||"listing",w=Statamic.$keys.bindGlobal(["mod+s"],r=>{r.preventDefault(),i()})}),K(()=>w?.destroy()),j(g,r=>{r!==p.proxy.$preferences.get(I)&&(r==="listing"?p.proxy.$preferences.remove(I):p.proxy.$preferences.set(I,r))});function U(){C.value=!0,p.proxy.$axios.delete(o.deleteUrl).then(()=>{Statamic.$toast.success(__("simple-redirects::messages.redirect_deleted")),_.visit(o.listingUrl)}).catch(()=>{Statamic.$toast.error(__("Something went wrong")),C.value=!1,S.value=!1})}function i(){new ge().provide({container:s,errors:x,saving:R}).through([new pe("redirect",{values:m.value}),new fe(o.submitUrl,o.isCreating?"post":"patch"),new me("redirect",{isCreating:o.isCreating})]).then(r=>{const n=o.isCreating?__("simple-redirects::messages.redirect_created"):__("simple-redirects::messages.redirect_saved");if(Statamic.$toast.success(n),g.value==="create_another"){_.visit(o.createAnotherUrl);return}if(g.value==="continue_editing"){o.isCreating&&r.data.redirect&&_.visit(r.data.redirect);return}_.visit(o.listingUrl)})}return(r,n)=>(c(),T(k,null,[t(e(F),{title:l.title},null,8,["title"]),t(e(B),{title:l.title,icon:l.icon},{default:a(()=>[l.isCreating?v("",!0):(c(),b(e(L),{key:0,align:"end"},{trigger:a(()=>[t(e(h),{icon:"dots",variant:"ghost","aria-label":r.__("Open dropdown menu")},null,8,["aria-label"])]),default:a(()=>[t(e($),null,{default:a(()=>[t(e(A),{text:r.__("Delete"),icon:"trash",variant:"destructive",onClick:n[0]||(n[0]=u=>S.value=!0)},null,8,["text"])]),_:1})]),_:1})),t(e(W),null,{default:a(()=>[t(e(h),{variant:"primary",text:r.__("Save"),disabled:R.value,onClick:i},null,8,["text","disabled"]),t(e(L),{align:"end"},{trigger:a(()=>[t(e(h),{variant:"primary",icon:"chevron-down","aria-label":r.__("Save options")},null,8,["aria-label"])]),default:a(()=>[t(e($),null,{default:a(()=>[t(e(Q),{id:"after-saving-label",textContent:y(r.__("After Saving"))},null,8,["textContent"]),t(e(te),{modelValue:g.value,"onUpdate:modelValue":n[1]||(n[1]=u=>g.value=u),"aria-labelledby":"after-saving-label"},{default:a(()=>[t(e(E),{label:r.__("Go To Listing"),value:"listing"},null,8,["label"]),t(e(E),{label:r.__("Continue Editing"),value:"continue_editing"},null,8,["label"]),t(e(E),{label:r.__("Create Another"),value:"create_another"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","icon"]),t(e(Z),{ref_key:"container",ref:s,name:l.title,blueprint:l.blueprint,meta:P.value,errors:x.value,modelValue:m.value,"onUpdate:modelValue":n[2]||(n[2]=u=>m.value=u)},{default:a(()=>[t(e(ee))]),_:1},8,["name","blueprint","meta","errors","modelValue"]),t(e(q),{open:S.value,"onUpdate:open":n[3]||(n[3]=u=>S.value=u),title:r.__("Delete"),"body-text":r.__("simple-redirects::messages.delete_confirmation"),"button-text":r.__("Delete"),busy:C.value,danger:"",onConfirm:U},null,8,["open","title","body-text","button-text","busy"])],64))}};Statamic.booting(()=>{Statamic.$inertia.register("simple-redirects::Index",ue),Statamic.$inertia.register("simple-redirects::Publish",ve)});
