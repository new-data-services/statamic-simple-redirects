const D=window.Vue,{BaseTransition:le,BaseTransitionPropsValidators:se,Comment:de,DeprecationTypes:ce,EffectScope:ue,ErrorCodes:me,ErrorTypeStrings:pe,Fragment:k,KeepAlive:ge,ReactiveEffect:fe,Static:ve,Suspense:Se,Teleport:he,Text:Ce,TrackOpTypes:be,Transition:ye,TransitionGroup:Te,TriggerOpTypes:Pe,VueElement:we,__esModule:xe,assertNumber:Re,callWithAsyncErrorHandling:_e,callWithErrorHandling:ke,camelize:Ae,capitalize:Ie,cloneVNode:Me,compatUtils:Ee,compile:De,computed:Le,createApp:He,createBlock:R,createCommentVNode:h,createElementBlock:T,createElementVNode:C,createHydrationRenderer:Ue,createPropsRestProxy:Ve,createRenderer:Fe,createSSRApp:Be,createSlots:Oe,createStaticVNode:$e,createTextVNode:A,createVNode:t,customRef:Ne,defineAsyncComponent:Ge,defineComponent:ze,defineCustomElement:Ke,defineEmits:je,defineExpose:We,defineModel:qe,defineOptions:Je,defineProps:Qe,defineSSRCustomElement:Xe,defineSlots:Ye,devtools:Ze,effect:et,effectScope:tt,getCurrentInstance:L,getCurrentScope:rt,getCurrentWatcher:nt,getTransitionRawChildren:it,guardReactiveProps:ot,h:at,handleError:lt,hasInjectionContext:st,hydrate:dt,hydrateOnIdle:ct,hydrateOnInteraction:ut,hydrateOnMediaQuery:mt,hydrateOnVisible:pt,initCustomFormatter:gt,initDirectivesForSSR:ft,inject:vt,isMemoSame:St,isProxy:ht,isReactive:Ct,isReadonly:bt,isRef:yt,isRuntimeOnly:Tt,isShallow:Pt,isVNode:wt,markRaw:xt,mergeDefaults:Rt,mergeModels:_t,mergeProps:kt,nextTick:At,nodeOps:It,normalizeClass:Mt,normalizeProps:Et,normalizeStyle:Dt,onActivated:Lt,onBeforeMount:Ht,onBeforeUnmount:Ut,onBeforeUpdate:Vt,onDeactivated:Ft,onErrorCaptured:Bt,onMounted:H,onRenderTracked:Ot,onRenderTriggered:$t,onScopeDispose:Nt,onServerPrefetch:Gt,onUnmounted:U,onUpdated:zt,onWatcherCleanup:Kt,openBlock:m,patchProp:jt,popScopeId:Wt,provide:qt,proxyRefs:Jt,pushScopeId:Qt,queuePostFlushCb:Xt,reactive:Yt,readonly:Zt,ref:u,registerRuntimeCompiler:er,render:tr,renderList:rr,renderSlot:nr,resolveComponent:ir,resolveDirective:or,resolveDynamicComponent:ar,resolveFilter:lr,resolveTransitionHooks:sr,setBlockTracking:dr,setDevtoolsHook:cr,setTransitionHooks:ur,shallowReactive:mr,shallowReadonly:pr,shallowRef:gr,ssrContextKey:fr,ssrUtils:vr,stop:Sr,toDisplayString:S,toHandlerKey:hr,toHandlers:Cr,toRaw:br,toRef:yr,toRefs:Tr,toValue:Pr,transformVNodeArgs:wr,triggerRef:xr,unref:e,useAttrs:Rr,useCssModule:_r,useCssVars:kr,useHost:Ar,useId:Ir,useModel:Mr,useSSRContext:Er,useShadowRoot:Dr,useSlots:Lr,useTemplateRef:V,useTransitionState:Hr,vModelCheckbox:Ur,vModelDynamic:Vr,vModelRadio:Fr,vModelSelect:Br,vModelText:Or,vShow:$r,version:Nr,warn:Gr,watch:F,watchEffect:zr,watchPostEffect:Kr,watchSyncEffect:jr,withAsyncContext:Wr,withCtx:l,withDefaults:qr,withDirectives:Jr,withKeys:Qr,withMemo:Xr,withModifiers:Yr,withScopeId:Zr}=D,{Form:en,Head:M,Link:tn,router:P,toggleArchitecturalBackground:rn,useArchitecturalBackground:nn,useForm:on,usePoll:an}=__STATAMIC__.inertia,{AuthCard:ln,Avatar:sn,Badge:I,Button:p,ButtonGroup:B,Calendar:dn,Card:cn,CardList:un,CardListItem:mn,CardPanel:pn,CharacterCounter:gn,Checkbox:fn,CheckboxGroup:vn,CodeEditor:Sn,Combobox:hn,CommandPaletteItem:Cn,ConfirmationModal:bn,Context:yn,ContextFooter:Tn,ContextHeader:Pn,ContextItem:wn,ContextLabel:xn,ContextMenu:Rn,ContextSeparator:_n,CreateForm:kn,DatePicker:An,DateRangePicker:In,Description:Mn,DocsCallout:En,DragHandle:Dn,Dropdown:O,DropdownItem:$,DropdownLabel:N,DropdownMenu:G,DropdownSeparator:Ln,DropdownFooter:Hn,DropdownHeader:Un,Editable:Vn,ErrorMessage:Fn,EmptyStateItem:Bn,EmptyStateMenu:On,Field:$n,Header:E,Heading:Nn,HoverCard:Gn,Icon:zn,Input:Kn,InputGroup:jn,InputGroupAppend:Wn,InputGroupPrepend:qn,Label:Jn,Listing:z,ListingCustomizeColumns:Qn,ListingFilters:Xn,ListingHeaderCell:Yn,ListingPagination:Zn,ListingPresets:ei,ListingPresetTrigger:ti,ListingRowActions:ri,ListingSearch:ni,ListingTable:ii,ListingTableBody:oi,ListingTableHead:ai,ListingToggleAll:li,LivePreview:si,LivePreviewPopout:di,Modal:ci,ModalClose:ui,ModalTitle:mi,Pagination:pi,Panel:gi,PanelFooter:fi,PanelHeader:vi,Popover:Si,PublishComponents:hi,PublishContainer:K,publishContextKey:Ci,injectPublishContext:bi,PublishField:yi,PublishFields:Ti,PublishFieldsProvider:Pi,PublishForm:wi,PublishLocalizations:xi,PublishSections:Ri,PublishTabs:j,Radio:_,RadioGroup:W,Select:_i,Separator:ki,Slider:Ai,Skeleton:Ii,SplitterGroup:Mi,SplitterPanel:Ei,SplitterResizeHandle:Di,StatusIndicator:q,Subheading:Li,Switch:Hi,TabContent:Ui,Stack:Vi,StackClose:Fi,StackHeader:Bi,StackFooter:Oi,StackContent:$i,Table:Ni,TableCell:Gi,TableColumn:zi,TableColumns:Ki,TableRow:ji,TableRows:Wi,TabList:qi,TabProvider:Ji,Tabs:Qi,TabTrigger:Xi,Textarea:Yi,TimePicker:Zi,ToggleGroup:eo,ToggleItem:to,Widget:ro,registerIconSet:no,registerIconSetFromStrings:io}=__STATAMIC__.ui,J={class:"max-w-6xl mx-auto"},Q={class:"flex items-center gap-2"},X=["href"],Y=["href"],Z={key:1,class:"p-8 text-center text-gray-500"},ee={__name:"Index",props:{title:String,redirects:Array,columns:Array,createUrl:String,reorderUrl:String,actionUrl:String},setup(r){const d=r,s=u(!1),c=u(null),g=u(0);function w(n){c.value=n}async function b(){if(!c.value){s.value=!1;return}const n=c.value.map(i=>i.id);try{if(!(await fetch(d.reorderUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":Statamic.$config.get("csrfToken")},body:JSON.stringify({order:n})})).ok)throw new Error("Failed to save order");Statamic.$toast.success(__("simple-redirects::messages.redirects_reordered")),c.value=null,s.value=!1}catch(i){Statamic.$toast.error(__("simple-redirects::messages.order_save_failed")),console.error("Save order error:",i)}}function y(){c.value=null,s.value=!1,g.value++}return(n,i)=>(m(),T(k,null,[t(e(M),{title:r.title},null,8,["title"]),C("div",J,[t(e(E),{title:r.title,icon:"moved"},{default:l(()=>[!s.value&&r.redirects.length>1?(m(),R(e(p),{key:0,onClick:i[0]||(i[0]=o=>s.value=!0),text:n.__("Reorder")},null,8,["text"])):h("",!0),s.value?(m(),T(k,{key:1},[t(e(p),{onClick:y,text:n.__("Cancel")},null,8,["text"]),t(e(p),{onClick:b,text:n.__("Save Order"),variant:"primary"},null,8,["text"])],64)):h("",!0),s.value?h("",!0):(m(),R(e(p),{key:2,text:n.__("Create Redirect"),href:r.createUrl,variant:"primary"},null,8,["text","href"]))]),_:1},8,["title"]),r.redirects.length>0?(m(),R(e(z),{key:g.value,items:r.redirects,columns:r.columns,"action-url":r.actionUrl,"allow-search":!0,"allow-customizing-columns":!1,"allow-presets":!1,reorderable:s.value,sortable:!1,onReordered:w,onRefreshing:i[1]||(i[1]=o=>e(P).reload())},{"cell-source":l(({row:o,value:f})=>[C("div",Q,[t(e(q),{status:o.enabled?"published":"draft"},null,8,["status"]),C("a",{href:o.edit_url,class:"slug-index-field"},S(f),9,X)])]),"cell-destination":l(({row:o,value:f})=>[C("a",{href:o.edit_url,class:"slug-index-field"},S(f),9,Y)]),"cell-type":l(({value:o})=>[t(e(I),null,{default:l(()=>[A(S(o),1)]),_:2},1024)]),"cell-status_code":l(({value:o})=>[t(e(I),null,{default:l(()=>[A(S(o),1)]),_:2},1024)]),"prepended-row-actions":l(({row:o})=>[t(e($),{text:n.__("Edit"),icon:"pencil",href:o.edit_url},null,8,["text","href"])]),_:1},8,["items","columns","action-url","reorderable"])):h("",!0),r.redirects.length?h("",!0):(m(),T("div",Z,[C("p",null,S(n.__("No redirects found.")),1),t(e(p),{text:n.__("Create your first redirect"),href:r.createUrl,variant:"primary",class:"mt-4"},null,8,["text","href"])]))])],64))}},{AfterSaveHooks:te,BeforeSaveHooks:re,Pipeline:ne,PipelineStopped:oo,Request:ie}=__STATAMIC__.savePipeline,oe="simple-redirects",ae={__name:"Publish",props:{title:String,icon:String,blueprint:Object,values:Object,meta:Object,submitUrl:String,listingUrl:String,createAnotherUrl:String,editUrlTemplate:String,isCreating:{type:Boolean,default:!0}},setup(r){const d=r,s=L(),c=V("container"),g=u(d.values),w=u(d.meta),b=u({}),y=u(!1),n=`${oe}.after_save`,i=u("listing");let o;H(()=>{i.value=s.proxy.$preferences.get(n)||"listing",o=Statamic.$keys.bindGlobal(["mod+s"],a=>{a.preventDefault(),f()})}),U(()=>o?.destroy()),F(i,a=>{a!==s.proxy.$preferences.get(n)&&(a==="listing"?s.proxy.$preferences.remove(n):s.proxy.$preferences.set(n,a))});function f(){new ne().provide({container:c,errors:b,saving:y}).through([new re("redirect",{values:g.value}),new ie(d.submitUrl,d.isCreating?"post":"patch"),new te("redirect",{isCreating:d.isCreating})]).then(a=>{const v=d.isCreating?__("simple-redirects::messages.redirect_created"):__("simple-redirects::messages.redirect_updated");if(Statamic.$toast.success(v),i.value==="create_another"){P.visit(d.createAnotherUrl);return}if(i.value==="continue_editing"){d.isCreating&&a.data.data.id&&P.visit(d.editUrlTemplate.replace("{id}",a.data.data.id));return}P.visit(d.listingUrl)})}return(a,v)=>(m(),T(k,null,[t(e(M),{title:r.title},null,8,["title"]),t(e(E),{title:r.title,icon:r.icon},{default:l(()=>[t(e(B),null,{default:l(()=>[t(e(p),{variant:"primary",text:a.__("Save"),disabled:y.value,onClick:f},null,8,["text","disabled"]),t(e(O),{align:"end"},{trigger:l(()=>[t(e(p),{variant:"primary",icon:"chevron-down","aria-label":a.__("Save options")},null,8,["aria-label"])]),default:l(()=>[t(e(G),null,{default:l(()=>[t(e(N),{id:"after-saving-label",textContent:S(a.__("After Saving"))},null,8,["textContent"]),t(e(W),{modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=x=>i.value=x),"aria-labelledby":"after-saving-label"},{default:l(()=>[t(e(_),{label:a.__("Go To Listing"),value:"listing"},null,8,["label"]),t(e(_),{label:a.__("Continue Editing"),value:"continue_editing"},null,8,["label"]),t(e(_),{label:a.__("Create Another"),value:"create_another"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","icon"]),t(e(K),{ref_key:"container",ref:c,name:r.title,blueprint:r.blueprint,meta:w.value,errors:b.value,modelValue:g.value,"onUpdate:modelValue":v[1]||(v[1]=x=>g.value=x)},{default:l(()=>[t(e(j))]),_:1},8,["name","blueprint","meta","errors","modelValue"])],64))}};Statamic.booting(()=>{Statamic.$inertia.register("simple-redirects::Index",ee),Statamic.$inertia.register("simple-redirects::Publish",ae)});
