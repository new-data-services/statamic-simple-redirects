const O=window.Vue,{BaseTransition:ve,BaseTransitionPropsValidators:he,Comment:Se,DeprecationTypes:Ce,EffectScope:be,ErrorCodes:_e,ErrorTypeStrings:ye,Fragment:T,KeepAlive:xe,ReactiveEffect:we,Static:Te,Suspense:ke,Teleport:Pe,Text:Re,TrackOpTypes:Ie,Transition:De,TransitionGroup:Ae,TriggerOpTypes:Ue,VueElement:Me,__esModule:Ee,assertNumber:Le,callWithAsyncErrorHandling:He,callWithErrorHandling:$e,camelize:Ve,capitalize:Fe,cloneVNode:Be,compatUtils:Oe,compile:ze,computed:Ge,createApp:Ne,createBlock:b,createCommentVNode:v,createElementBlock:k,createElementVNode:f,createHydrationRenderer:je,createPropsRestProxy:Ke,createRenderer:We,createSSRApp:qe,createSlots:Qe,createStaticVNode:Je,createTextVNode:D,createVNode:r,customRef:Xe,defineAsyncComponent:Ye,defineComponent:Ze,defineCustomElement:et,defineEmits:tt,defineExpose:rt,defineModel:it,defineOptions:nt,defineProps:at,defineSSRCustomElement:lt,defineSlots:ot,devtools:st,effect:dt,effectScope:ct,getCurrentInstance:V,getCurrentScope:ut,getCurrentWatcher:mt,getTransitionRawChildren:pt,guardReactiveProps:gt,h:ft,handleError:vt,hasInjectionContext:ht,hydrate:St,hydrateOnIdle:Ct,hydrateOnInteraction:bt,hydrateOnMediaQuery:_t,hydrateOnVisible:yt,initCustomFormatter:xt,initDirectivesForSSR:wt,inject:Tt,isMemoSame:kt,isProxy:Pt,isReactive:Rt,isReadonly:It,isRef:Dt,isRuntimeOnly:At,isShallow:Ut,isVNode:Mt,markRaw:Et,mergeDefaults:Lt,mergeModels:Ht,mergeProps:$t,nextTick:Vt,nodeOps:Ft,normalizeClass:Bt,normalizeProps:Ot,normalizeStyle:zt,onActivated:Gt,onBeforeMount:Nt,onBeforeUnmount:jt,onBeforeUpdate:Kt,onDeactivated:Wt,onErrorCaptured:qt,onMounted:z,onRenderTracked:Qt,onRenderTriggered:Jt,onScopeDispose:Xt,onServerPrefetch:Yt,onUnmounted:G,onUpdated:Zt,onWatcherCleanup:er,openBlock:c,patchProp:tr,popScopeId:rr,provide:ir,proxyRefs:nr,pushScopeId:ar,queuePostFlushCb:lr,reactive:or,readonly:sr,ref:u,registerRuntimeCompiler:dr,render:cr,renderList:ur,renderSlot:mr,resolveComponent:pr,resolveDirective:gr,resolveDynamicComponent:fr,resolveFilter:vr,resolveTransitionHooks:hr,setBlockTracking:Sr,setDevtoolsHook:Cr,setTransitionHooks:br,shallowReactive:_r,shallowReadonly:yr,shallowRef:xr,ssrContextKey:wr,ssrUtils:Tr,stop:kr,toDisplayString:_,toHandlerKey:Pr,toHandlers:Rr,toRaw:Ir,toRef:Dr,toRefs:Ar,toValue:Ur,transformVNodeArgs:Mr,triggerRef:Er,unref:e,useAttrs:Lr,useCssModule:Hr,useCssVars:$r,useHost:Vr,useId:Fr,useModel:Br,useSSRContext:Or,useShadowRoot:zr,useSlots:Gr,useTemplateRef:N,useTransitionState:Nr,vModelCheckbox:jr,vModelDynamic:Kr,vModelRadio:Wr,vModelSelect:qr,vModelText:Qr,vShow:Jr,version:Xr,warn:Yr,watch:j,watchEffect:Zr,watchPostEffect:ei,watchSyncEffect:ti,withAsyncContext:ri,withCtx:n,withDefaults:ii,withDirectives:ni,withKeys:ai,withMemo:li,withModifiers:oi,withScopeId:si}=O,{Form:di,Head:F,Link:ci,router:y,toggleArchitecturalBackground:ui,useArchitecturalBackground:mi,useForm:pi,usePoll:gi}=__STATAMIC__.inertia,{Alert:fi,AuthCard:vi,Avatar:hi,Badge:M,Button:h,ButtonGroup:K,Calendar:Si,Card:Ci,CardList:bi,CardListItem:_i,CardPanel:yi,CharacterCounter:xi,Checkbox:wi,CheckboxGroup:Ti,CodeEditor:ki,Combobox:Pi,CommandPaletteItem:Ri,ConfirmationModal:W,Context:Ii,ContextFooter:Di,ContextHeader:Ai,ContextItem:Ui,ContextLabel:Mi,ContextMenu:Ei,ContextSeparator:Li,CreateForm:Hi,DatePicker:$i,DateRangePicker:Vi,Description:Fi,DocsCallout:Bi,DragHandle:Oi,Dropdown:L,DropdownItem:U,DropdownLabel:q,DropdownMenu:H,DropdownSeparator:zi,DropdownFooter:Gi,DropdownHeader:Ni,Editable:ji,ErrorMessage:Ki,EmptyStateItem:$,EmptyStateMenu:Q,Field:Wi,Header:B,Heading:qi,HoverCard:Qi,Icon:J,Input:Ji,InputGroup:Xi,InputGroupAppend:Yi,InputGroupPrepend:Zi,Label:en,Listing:X,ListingCustomizeColumns:tn,ListingFilters:rn,ListingHeaderCell:nn,ListingPagination:an,ListingPresets:ln,ListingPresetTrigger:on,ListingRowActions:sn,ListingSearch:dn,ListingTable:cn,ListingTableBody:un,ListingTableHead:mn,ListingToggleAll:pn,LivePreview:gn,LivePreviewPopout:fn,Modal:vn,ModalClose:hn,ModalTitle:Sn,Pagination:Cn,Panel:bn,PanelFooter:_n,PanelHeader:yn,Popover:xn,PublishComponents:wn,PublishContainer:Y,publishContextKey:Tn,injectPublishContext:kn,PublishField:Pn,PublishFields:Rn,PublishFieldsProvider:In,PublishForm:Dn,PublishLocalizations:An,PublishSections:Un,PublishTabs:Z,Radio:E,RadioGroup:ee,Select:Mn,Separator:En,Slider:Ln,Skeleton:Hn,SplitterGroup:$n,SplitterPanel:Vn,SplitterResizeHandle:Fn,StatusIndicator:te,Subheading:Bn,Switch:On,TabContent:zn,Stack:Gn,StackClose:Nn,StackHeader:jn,StackFooter:Kn,StackContent:Wn,Table:qn,TableCell:Qn,TableColumn:Jn,TableColumns:Xn,TableRow:Yn,TableRows:Zn,TabList:ea,TabProvider:ta,Tabs:ra,TabTrigger:ia,Textarea:na,TimePicker:aa,ToggleGroup:la,ToggleItem:oa,Widget:sa,registerIconSet:da,registerIconSetFromStrings:ca}=__STATAMIC__.ui,re={class:"max-w-6xl mx-auto"},ie={class:"flex items-center gap-2"},ne=["href"],ae=["href"],le={class:"py-8 mt-8 text-center"},oe={class:"text-[25px] font-medium antialiased flex justify-center items-center gap-2 sm:gap-3"},se={class:"mt-12 mb-10 flex justify-center text-center"},de="simple-redirects",ce={__name:"Index",props:{title:String,redirects:Array,columns:Array,createUrl:String,reorderUrl:String,actionUrl:String,exportUrl:String,importUrl:String},setup(a){const l=a,g=V(),d=u(!1),m=u(null),P=u(0),x=u(null);function R(i){m.value=i}function S(){if(!m.value){d.value=!1;return}const i=m.value.map(o=>o.id);g.proxy.$axios.post(l.reorderUrl,{order:i}).then(()=>{Statamic.$toast.success(__("simple-redirects::messages.redirects_reordered")),m.value=null,d.value=!1}).catch(()=>{Statamic.$toast.error(__("simple-redirects::messages.order_save_failed"))})}function w(){m.value=null,d.value=!1,P.value++}function p(){x.value?.click()}function I(i){if(!i.target.files[0])return;Statamic.$progress.start("import");const o=new FormData;o.append("file",i.target.files[0]),g.proxy.$axios.post(l.importUrl,o).then(()=>{Statamic.$toast.success(__("simple-redirects::messages.import_complete")),y.reload()}).catch(()=>{Statamic.$toast.error(__("simple-redirects::messages.import_failed"))}).finally(()=>{Statamic.$progress.complete("import"),i.target.value=""})}return(i,o)=>(c(),k(T,null,[r(e(F),{title:a.title},null,8,["title"]),f("div",re,[a.redirects.length?(c(),k(T,{key:0},[r(e(B),{title:a.title,icon:"moved"},{default:n(()=>[d.value?v("",!0):(c(),b(e(L),{key:0},{trigger:n(()=>[r(e(h),{icon:"dots",variant:"ghost","aria-label":i.__("Open dropdown menu")},null,8,["aria-label"])]),default:n(()=>[r(e(H),null,{default:n(()=>[r(e(U),{text:i.__("simple-redirects::messages.import_csv"),icon:"upload-arrow-up",onClick:p},null,8,["text"]),r(e(U),{text:i.__("simple-redirects::messages.export_csv"),icon:"download-arrow-down",href:a.exportUrl,target:"_blank",download:""},null,8,["text","href"])]),_:1})]),_:1})),!d.value&&a.redirects.length>1?(c(),b(e(h),{key:1,onClick:o[0]||(o[0]=t=>d.value=!0),text:i.__("Reorder")},null,8,["text"])):v("",!0),d.value?(c(),k(T,{key:2},[r(e(h),{onClick:w,text:i.__("Cancel")},null,8,["text"]),r(e(h),{onClick:S,text:i.__("Save Order"),variant:"primary"},null,8,["text"])],64)):v("",!0),d.value?v("",!0):(c(),b(e(h),{key:3,text:i.__("Create Redirect"),href:a.createUrl,variant:"primary"},null,8,["text","href"]))]),_:1},8,["title"]),(c(),b(e(X),{key:P.value,items:a.redirects,columns:a.columns,"action-url":a.actionUrl,"preferences-prefix":de,"allow-search":!0,"allow-customizing-columns":!0,"allow-presets":!1,reorderable:d.value,sortable:!1,onReordered:R,onRefreshing:o[1]||(o[1]=t=>e(y).reload())},{"cell-source":n(({row:t,value:s})=>[f("div",ie,[r(e(te),{status:t.enabled?"published":"draft"},null,8,["status"]),f("a",{href:t.edit_url,class:"slug-index-field"},_(s),9,ne)])]),"cell-destination":n(({row:t,value:s})=>[f("a",{href:t.edit_url,class:"slug-index-field"},_(s),9,ae)]),"cell-sites":n(({value:t})=>[D(_(t),1)]),"cell-regex":n(({value:t})=>[t?(c(),b(e(M),{key:0,size:"sm"},{default:n(()=>[...o[2]||(o[2]=[D("Regex",-1)])]),_:1})):v("",!0)]),"cell-status_code":n(({value:t})=>[r(e(M),{size:"sm"},{default:n(()=>[D(_(t),1)]),_:2},1024)]),"prepended-row-actions":n(({row:t})=>[r(e(U),{text:i.__("Edit"),icon:"pencil",href:t.edit_url},null,8,["text","href"])]),_:1},8,["items","columns","action-url","reorderable"]))],64)):v("",!0),a.redirects.length?v("",!0):(c(),k(T,{key:1},[f("header",le,[f("h1",oe,[r(e(J),{name:"moved",class:"size-5 text-gray-500"}),D(" "+_(a.title),1)])]),r(e(Q),{heading:i.__("simple-redirects::messages.redirects_intro")},{default:n(()=>[r(e($),{href:a.createUrl,icon:"moved",heading:i.__("Create Redirect"),description:i.__("simple-redirects::messages.create_first_redirect")},null,8,["href","heading","description"]),r(e($),{onClick:p,icon:"upload-arrow-up",heading:i.__("simple-redirects::messages.import_csv"),description:i.__("simple-redirects::messages.import_description")},null,8,["heading","description"])]),_:1},8,["heading"]),f("div",se,[r(e(M),{text:i.__("simple-redirects::messages.learn_about_redirects"),"icon-append":"external-link",href:"https://github.com/new-data-services/statamic-simple-redirects",target:"_blank",pill:""},null,8,["text"])])],64)),f("input",{ref_key:"fileInput",ref:x,type:"file",accept:".csv,text/csv",class:"hidden",onChange:I},null,544)])],64))}},{AfterSaveHooks:ue,BeforeSaveHooks:me,Pipeline:pe,PipelineStopped:ua,Request:ge}=__STATAMIC__.savePipeline,A="simple-redirects.after_save",fe={__name:"Publish",props:{title:String,icon:String,blueprint:Object,values:Object,meta:Object,submitUrl:String,listingUrl:String,createAnotherUrl:String,deleteUrl:String,isCreating:{type:Boolean,default:!0}},setup(a){const l=a,g=V(),d=N("container"),m=u(l.values),P=u(l.meta),x=u({}),R=u(!1),S=u(!1),w=u(!1),p=u("listing");let I;z(()=>{p.value=g.proxy.$preferences.get(A)||"listing",I=Statamic.$keys.bindGlobal(["mod+s"],t=>{t.preventDefault(),o()})}),G(()=>I?.destroy()),j(p,t=>{t!==g.proxy.$preferences.get(A)&&(t==="listing"?g.proxy.$preferences.remove(A):g.proxy.$preferences.set(A,t))});function i(){w.value=!0,g.proxy.$axios.delete(l.deleteUrl).then(()=>{Statamic.$toast.success(__("simple-redirects::messages.redirect_deleted")),y.visit(l.listingUrl)}).catch(()=>{Statamic.$toast.error(__("Something went wrong")),w.value=!1,S.value=!1})}function o(){new pe().provide({container:d,errors:x,saving:R}).through([new me("redirect",{values:m.value}),new ge(l.submitUrl,l.isCreating?"post":"patch"),new ue("redirect",{isCreating:l.isCreating})]).then(t=>{const s=l.isCreating?__("simple-redirects::messages.redirect_created"):__("simple-redirects::messages.redirect_saved");if(Statamic.$toast.success(s),p.value==="create_another"){y.visit(l.createAnotherUrl);return}if(p.value==="continue_editing"){l.isCreating&&t.data.redirect&&y.visit(t.data.redirect);return}y.visit(l.listingUrl)})}return(t,s)=>(c(),k(T,null,[r(e(F),{title:a.title},null,8,["title"]),r(e(B),{title:a.title,icon:a.icon},{default:n(()=>[a.isCreating?v("",!0):(c(),b(e(L),{key:0,align:"end"},{trigger:n(()=>[r(e(h),{icon:"dots",variant:"ghost","aria-label":t.__("Open dropdown menu")},null,8,["aria-label"])]),default:n(()=>[r(e(H),null,{default:n(()=>[r(e(U),{text:t.__("Delete"),icon:"trash",variant:"destructive",onClick:s[0]||(s[0]=C=>S.value=!0)},null,8,["text"])]),_:1})]),_:1})),r(e(K),null,{default:n(()=>[r(e(h),{variant:"primary",text:t.__("Save"),disabled:R.value,onClick:o},null,8,["text","disabled"]),r(e(L),{align:"end"},{trigger:n(()=>[r(e(h),{variant:"primary",icon:"chevron-down","aria-label":t.__("Save options")},null,8,["aria-label"])]),default:n(()=>[r(e(H),null,{default:n(()=>[r(e(q),{id:"after-saving-label",textContent:_(t.__("After Saving"))},null,8,["textContent"]),r(e(ee),{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=C=>p.value=C),"aria-labelledby":"after-saving-label"},{default:n(()=>[r(e(E),{label:t.__("Go To Listing"),value:"listing"},null,8,["label"]),r(e(E),{label:t.__("Continue Editing"),value:"continue_editing"},null,8,["label"]),r(e(E),{label:t.__("Create Another"),value:"create_another"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","icon"]),r(e(Y),{ref_key:"container",ref:d,name:a.title,blueprint:a.blueprint,meta:P.value,errors:x.value,modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=C=>m.value=C)},{default:n(()=>[r(e(Z))]),_:1},8,["name","blueprint","meta","errors","modelValue"]),r(e(W),{open:S.value,"onUpdate:open":s[3]||(s[3]=C=>S.value=C),title:t.__("Delete"),"body-text":t.__("simple-redirects::messages.delete_confirmation"),"button-text":t.__("Delete"),busy:w.value,danger:"",onConfirm:i},null,8,["open","title","body-text","button-text","busy"])],64))}};Statamic.booting(()=>{Statamic.$inertia.register("simple-redirects::Index",ce),Statamic.$inertia.register("simple-redirects::Publish",fe)});
