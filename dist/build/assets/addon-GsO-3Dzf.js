const D=window.Vue,{BaseTransition:ae,BaseTransitionPropsValidators:le,Comment:se,DeprecationTypes:de,EffectScope:ce,ErrorCodes:ue,ErrorTypeStrings:me,Fragment:k,KeepAlive:pe,ReactiveEffect:ge,Static:fe,Suspense:ve,Teleport:Se,Text:he,TrackOpTypes:Ce,Transition:be,TransitionGroup:ye,TriggerOpTypes:Te,VueElement:we,__esModule:Pe,assertNumber:xe,callWithAsyncErrorHandling:Re,callWithErrorHandling:_e,camelize:ke,capitalize:Ae,cloneVNode:Ie,compatUtils:Me,compile:Ee,computed:De,createApp:Le,createBlock:R,createCommentVNode:S,createElementBlock:T,createElementVNode:h,createHydrationRenderer:He,createPropsRestProxy:Ue,createRenderer:Ve,createSSRApp:Fe,createSlots:Be,createStaticVNode:Oe,createTextVNode:A,createVNode:t,customRef:$e,defineAsyncComponent:Ne,defineComponent:Ge,defineCustomElement:ze,defineEmits:Ke,defineExpose:je,defineModel:We,defineOptions:qe,defineProps:Je,defineSSRCustomElement:Qe,defineSlots:Xe,devtools:Ye,effect:Ze,effectScope:et,getCurrentInstance:L,getCurrentScope:tt,getCurrentWatcher:rt,getTransitionRawChildren:nt,guardReactiveProps:it,h:ot,handleError:at,hasInjectionContext:lt,hydrate:st,hydrateOnIdle:dt,hydrateOnInteraction:ct,hydrateOnMediaQuery:ut,hydrateOnVisible:mt,initCustomFormatter:pt,initDirectivesForSSR:gt,inject:ft,isMemoSame:vt,isProxy:St,isReactive:ht,isReadonly:Ct,isRef:bt,isRuntimeOnly:yt,isShallow:Tt,isVNode:wt,markRaw:Pt,mergeDefaults:xt,mergeModels:Rt,mergeProps:_t,nextTick:kt,nodeOps:At,normalizeClass:It,normalizeProps:Mt,normalizeStyle:Et,onActivated:Dt,onBeforeMount:Lt,onBeforeUnmount:Ht,onBeforeUpdate:Ut,onDeactivated:Vt,onErrorCaptured:Ft,onMounted:H,onRenderTracked:Bt,onRenderTriggered:Ot,onScopeDispose:$t,onServerPrefetch:Nt,onUnmounted:U,onUpdated:Gt,onWatcherCleanup:zt,openBlock:m,patchProp:Kt,popScopeId:jt,provide:Wt,proxyRefs:qt,pushScopeId:Jt,queuePostFlushCb:Qt,reactive:Xt,readonly:Yt,ref:u,registerRuntimeCompiler:Zt,render:er,renderList:tr,renderSlot:rr,resolveComponent:nr,resolveDirective:ir,resolveDynamicComponent:or,resolveFilter:ar,resolveTransitionHooks:lr,setBlockTracking:sr,setDevtoolsHook:dr,setTransitionHooks:cr,shallowReactive:ur,shallowReadonly:mr,shallowRef:pr,ssrContextKey:gr,ssrUtils:fr,stop:vr,toDisplayString:v,toHandlerKey:Sr,toHandlers:hr,toRaw:Cr,toRef:br,toRefs:yr,toValue:Tr,transformVNodeArgs:wr,triggerRef:Pr,unref:e,useAttrs:xr,useCssModule:Rr,useCssVars:_r,useHost:kr,useId:Ar,useModel:Ir,useSSRContext:Mr,useShadowRoot:Er,useSlots:Dr,useTemplateRef:V,useTransitionState:Lr,vModelCheckbox:Hr,vModelDynamic:Ur,vModelRadio:Vr,vModelSelect:Fr,vModelText:Br,vShow:Or,version:$r,warn:Nr,watch:F,watchEffect:Gr,watchPostEffect:zr,watchSyncEffect:Kr,withAsyncContext:jr,withCtx:a,withDefaults:Wr,withDirectives:qr,withKeys:Jr,withMemo:Qr,withModifiers:Xr,withScopeId:Yr}=D,{Form:Zr,Head:M,Link:en,router:w,toggleArchitecturalBackground:tn,useArchitecturalBackground:rn,useForm:nn,usePoll:on}=__STATAMIC__.inertia,{Alert:an,AuthCard:ln,Avatar:sn,Badge:I,Button:p,ButtonGroup:B,Calendar:dn,Card:cn,CardList:un,CardListItem:mn,CardPanel:pn,CharacterCounter:gn,Checkbox:fn,CheckboxGroup:vn,CodeEditor:Sn,Combobox:hn,CommandPaletteItem:Cn,ConfirmationModal:bn,Context:yn,ContextFooter:Tn,ContextHeader:wn,ContextItem:Pn,ContextLabel:xn,ContextMenu:Rn,ContextSeparator:_n,CreateForm:kn,DatePicker:An,DateRangePicker:In,Description:Mn,DocsCallout:En,DragHandle:Dn,Dropdown:O,DropdownItem:$,DropdownLabel:N,DropdownMenu:G,DropdownSeparator:Ln,DropdownFooter:Hn,DropdownHeader:Un,Editable:Vn,ErrorMessage:Fn,EmptyStateItem:Bn,EmptyStateMenu:On,Field:$n,Header:E,Heading:Nn,HoverCard:Gn,Icon:zn,Input:Kn,InputGroup:jn,InputGroupAppend:Wn,InputGroupPrepend:qn,Label:Jn,Listing:z,ListingCustomizeColumns:Qn,ListingFilters:Xn,ListingHeaderCell:Yn,ListingPagination:Zn,ListingPresets:ei,ListingPresetTrigger:ti,ListingRowActions:ri,ListingSearch:ni,ListingTable:ii,ListingTableBody:oi,ListingTableHead:ai,ListingToggleAll:li,LivePreview:si,LivePreviewPopout:di,Modal:ci,ModalClose:ui,ModalTitle:mi,Pagination:pi,Panel:gi,PanelFooter:fi,PanelHeader:vi,Popover:Si,PublishComponents:hi,PublishContainer:K,publishContextKey:Ci,injectPublishContext:bi,PublishField:yi,PublishFields:Ti,PublishFieldsProvider:wi,PublishForm:Pi,PublishLocalizations:xi,PublishSections:Ri,PublishTabs:j,Radio:_,RadioGroup:W,Select:_i,Separator:ki,Slider:Ai,Skeleton:Ii,SplitterGroup:Mi,SplitterPanel:Ei,SplitterResizeHandle:Di,StatusIndicator:q,Subheading:Li,Switch:Hi,TabContent:Ui,Stack:Vi,StackClose:Fi,StackHeader:Bi,StackFooter:Oi,StackContent:$i,Table:Ni,TableCell:Gi,TableColumn:zi,TableColumns:Ki,TableRow:ji,TableRows:Wi,TabList:qi,TabProvider:Ji,Tabs:Qi,TabTrigger:Xi,Textarea:Yi,TimePicker:Zi,ToggleGroup:eo,ToggleItem:to,Widget:ro,registerIconSet:no,registerIconSetFromStrings:io}=__STATAMIC__.ui,J={class:"max-w-6xl mx-auto"},Q={class:"flex items-center gap-2"},X=["href"],Y=["href"],Z={key:1,class:"p-8 text-center text-gray-500"},ee={__name:"Index",props:{title:String,redirects:Array,columns:Array,createUrl:String,reorderUrl:String,actionUrl:String},setup(n){const s=n,l=u(!1),c=u(null),g=u(0);function P(i){c.value=i}async function C(){if(!c.value){l.value=!1;return}const i=c.value.map(d=>d.id);try{if(!(await fetch(s.reorderUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":Statamic.$config.get("csrfToken")},body:JSON.stringify({order:i})})).ok)throw new Error("Failed to save order");Statamic.$toast.success(__("simple-redirects::messages.redirects_reordered")),c.value=null,l.value=!1}catch(d){Statamic.$toast.error(__("simple-redirects::messages.order_save_failed")),console.error("Save order error:",d)}}function b(){c.value=null,l.value=!1,g.value++}return(i,d)=>(m(),T(k,null,[t(e(M),{title:n.title},null,8,["title"]),h("div",J,[t(e(E),{title:n.title,icon:"moved"},{default:a(()=>[!l.value&&n.redirects.length>1?(m(),R(e(p),{key:0,onClick:d[0]||(d[0]=o=>l.value=!0),text:i.__("Reorder")},null,8,["text"])):S("",!0),l.value?(m(),T(k,{key:1},[t(e(p),{onClick:b,text:i.__("Cancel")},null,8,["text"]),t(e(p),{onClick:C,text:i.__("Save Order"),variant:"primary"},null,8,["text"])],64)):S("",!0),l.value?S("",!0):(m(),R(e(p),{key:2,text:i.__("Create Redirect"),href:n.createUrl,variant:"primary"},null,8,["text","href"]))]),_:1},8,["title"]),n.redirects.length>0?(m(),R(e(z),{key:g.value,items:n.redirects,columns:n.columns,"action-url":n.actionUrl,"allow-search":!0,"allow-customizing-columns":!1,"allow-presets":!1,reorderable:l.value,sortable:!1,onReordered:P,onRefreshing:d[1]||(d[1]=o=>e(w).reload())},{"cell-source":a(({row:o,value:r})=>[h("div",Q,[t(e(q),{status:o.enabled?"published":"draft"},null,8,["status"]),h("a",{href:o.edit_url,class:"slug-index-field"},v(r),9,X)])]),"cell-destination":a(({row:o,value:r})=>[h("a",{href:o.edit_url,class:"slug-index-field"},v(r),9,Y)]),"cell-type":a(({value:o})=>[t(e(I),null,{default:a(()=>[A(v(o),1)]),_:2},1024)]),"cell-status_code":a(({value:o})=>[t(e(I),null,{default:a(()=>[A(v(o),1)]),_:2},1024)]),"prepended-row-actions":a(({row:o})=>[t(e($),{text:i.__("Edit"),icon:"pencil",href:o.edit_url},null,8,["text","href"])]),_:1},8,["items","columns","action-url","reorderable"])):S("",!0),n.redirects.length?S("",!0):(m(),T("div",Z,[h("p",null,v(i.__("No redirects found.")),1),t(e(p),{text:i.__("Create your first redirect"),href:n.createUrl,variant:"primary",class:"mt-4"},null,8,["text","href"])]))])],64))}},{AfterSaveHooks:te,BeforeSaveHooks:re,Pipeline:ne,PipelineStopped:oo,Request:ie}=__STATAMIC__.savePipeline,y="redirects.after_save",oe={__name:"Publish",props:{title:String,icon:String,blueprint:Object,values:Object,meta:Object,submitUrl:String,listingUrl:String,createAnotherUrl:String,editUrlTemplate:String,isCreating:{type:Boolean,default:!0}},setup(n){const s=n,l=L(),c=V("container"),g=u(s.values),P=u(s.meta),C=u({}),b=u(!1),i=u("listing");let d;H(()=>{i.value=l.proxy.$preferences.get(y)||"listing",d=Statamic.$keys.bindGlobal(["mod+s"],r=>{r.preventDefault(),o()})}),U(()=>d?.destroy()),F(i,r=>{r!==l.proxy.$preferences.get(y)&&(r==="listing"?l.proxy.$preferences.remove(y):l.proxy.$preferences.set(y,r))});function o(){new ne().provide({container:c,errors:C,saving:b}).through([new re("redirect",{values:g.value}),new ie(s.submitUrl,s.isCreating?"post":"patch"),new te("redirect",{isCreating:s.isCreating})]).then(r=>{const f=s.isCreating?__("simple-redirects::messages.redirect_created"):__("simple-redirects::messages.redirect_updated");if(Statamic.$toast.success(f),i.value==="create_another"){w.visit(s.createAnotherUrl);return}if(i.value==="continue_editing"){s.isCreating&&r.data.data.id&&w.visit(s.editUrlTemplate.replace("{id}",r.data.data.id));return}w.visit(s.listingUrl)})}return(r,f)=>(m(),T(k,null,[t(e(M),{title:n.title},null,8,["title"]),t(e(E),{title:n.title,icon:n.icon},{default:a(()=>[t(e(B),null,{default:a(()=>[t(e(p),{variant:"primary",text:r.__("Save"),disabled:b.value,onClick:o},null,8,["text","disabled"]),t(e(O),{align:"end"},{trigger:a(()=>[t(e(p),{variant:"primary",icon:"chevron-down","aria-label":r.__("Save options")},null,8,["aria-label"])]),default:a(()=>[t(e(G),null,{default:a(()=>[t(e(N),{id:"after-saving-label",textContent:v(r.__("After Saving"))},null,8,["textContent"]),t(e(W),{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=x=>i.value=x),"aria-labelledby":"after-saving-label"},{default:a(()=>[t(e(_),{label:r.__("Go To Listing"),value:"listing"},null,8,["label"]),t(e(_),{label:r.__("Continue Editing"),value:"continue_editing"},null,8,["label"]),t(e(_),{label:r.__("Create Another"),value:"create_another"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","icon"]),t(e(K),{ref_key:"container",ref:c,name:n.title,blueprint:n.blueprint,meta:P.value,errors:C.value,modelValue:g.value,"onUpdate:modelValue":f[1]||(f[1]=x=>g.value=x)},{default:a(()=>[t(e(j))]),_:1},8,["name","blueprint","meta","errors","modelValue"])],64))}};Statamic.booting(()=>{Statamic.$inertia.register("simple-redirects::Index",ee),Statamic.$inertia.register("simple-redirects::Publish",oe)});
