const D=window.Vue,{BaseTransition:re,BaseTransitionPropsValidators:ae,Comment:ie,DeprecationTypes:ne,EffectScope:oe,ErrorCodes:le,ErrorTypeStrings:se,Fragment:_,KeepAlive:de,ReactiveEffect:ce,Static:ue,Suspense:me,Teleport:pe,Text:ge,TrackOpTypes:fe,Transition:ve,TransitionGroup:Se,TriggerOpTypes:he,VueElement:Ce,__esModule:be,assertNumber:ye,callWithAsyncErrorHandling:Te,callWithErrorHandling:Pe,camelize:we,capitalize:xe,cloneVNode:Re,compatUtils:_e,compile:ke,computed:Ae,createApp:Ee,createBlock:x,createCommentVNode:y,createElementBlock:P,createElementVNode:T,createHydrationRenderer:Ie,createPropsRestProxy:Me,createRenderer:De,createSSRApp:Le,createSlots:Ue,createStaticVNode:Fe,createTextVNode:k,createVNode:t,customRef:He,defineAsyncComponent:Ve,defineComponent:Oe,defineCustomElement:$e,defineEmits:Be,defineExpose:Ne,defineModel:Ge,defineOptions:je,defineProps:ze,defineSSRCustomElement:Ke,defineSlots:We,devtools:Je,effect:Xe,effectScope:qe,getCurrentInstance:L,getCurrentScope:Qe,getCurrentWatcher:Ye,getTransitionRawChildren:Ze,guardReactiveProps:et,h:tt,handleError:rt,hasInjectionContext:at,hydrate:it,hydrateOnIdle:nt,hydrateOnInteraction:ot,hydrateOnMediaQuery:lt,hydrateOnVisible:st,initCustomFormatter:dt,initDirectivesForSSR:ct,inject:ut,isMemoSame:mt,isProxy:pt,isReactive:gt,isReadonly:ft,isRef:vt,isRuntimeOnly:St,isShallow:ht,isVNode:Ct,markRaw:bt,mergeDefaults:yt,mergeModels:Tt,mergeProps:Pt,nextTick:wt,nodeOps:xt,normalizeClass:Rt,normalizeProps:_t,normalizeStyle:kt,onActivated:At,onBeforeMount:Et,onBeforeUnmount:It,onBeforeUpdate:Mt,onDeactivated:Dt,onErrorCaptured:Lt,onMounted:U,onRenderTracked:Ut,onRenderTriggered:Ft,onScopeDispose:Ht,onServerPrefetch:Vt,onUnmounted:F,onUpdated:Ot,onWatcherCleanup:$t,openBlock:m,patchProp:Bt,popScopeId:Nt,provide:Gt,proxyRefs:jt,pushScopeId:zt,queuePostFlushCb:Kt,reactive:Wt,readonly:Jt,ref:p,registerRuntimeCompiler:Xt,render:qt,renderList:Qt,renderSlot:Yt,resolveComponent:Zt,resolveDirective:er,resolveDynamicComponent:tr,resolveFilter:rr,resolveTransitionHooks:ar,setBlockTracking:ir,setDevtoolsHook:nr,setTransitionHooks:or,shallowReactive:lr,shallowReadonly:sr,shallowRef:dr,ssrContextKey:cr,ssrUtils:ur,stop:mr,toDisplayString:v,toHandlerKey:pr,toHandlers:gr,toRaw:fr,toRef:vr,toRefs:Sr,toValue:hr,transformVNodeArgs:Cr,triggerRef:br,unref:e,useAttrs:yr,useCssModule:Tr,useCssVars:Pr,useHost:wr,useId:xr,useModel:Rr,useSSRContext:_r,useShadowRoot:kr,useSlots:Ar,useTemplateRef:Er,useTransitionState:Ir,vModelCheckbox:Mr,vModelDynamic:Dr,vModelRadio:Lr,vModelSelect:Ur,vModelText:Fr,vShow:Hr,version:Vr,warn:Or,watch:H,watchEffect:$r,watchPostEffect:Br,watchSyncEffect:Nr,withAsyncContext:Gr,withCtx:l,withDefaults:jr,withDirectives:zr,withKeys:Kr,withMemo:Wr,withModifiers:Jr,withScopeId:Xr}=D,{Form:qr,Head:E,Link:Qr,router:S,toggleArchitecturalBackground:Yr,useArchitecturalBackground:Zr,useForm:ea,usePoll:ta}=__STATAMIC__.inertia,{AuthCard:ra,Avatar:aa,Badge:A,Button:g,ButtonGroup:V,Calendar:ia,Card:na,CardList:oa,CardListItem:la,CardPanel:sa,CharacterCounter:da,Checkbox:ca,CheckboxGroup:ua,CodeEditor:ma,Combobox:pa,CommandPaletteItem:ga,ConfirmationModal:fa,Context:va,ContextFooter:Sa,ContextHeader:ha,ContextItem:Ca,ContextLabel:ba,ContextMenu:ya,ContextSeparator:Ta,CreateForm:Pa,DatePicker:wa,DateRangePicker:xa,Description:Ra,DocsCallout:_a,DragHandle:ka,Dropdown:O,DropdownItem:$,DropdownLabel:B,DropdownMenu:N,DropdownSeparator:Aa,DropdownFooter:Ea,DropdownHeader:Ia,Editable:Ma,ErrorMessage:Da,EmptyStateItem:La,EmptyStateMenu:Ua,Field:Fa,Header:I,Heading:Ha,HoverCard:Va,Icon:Oa,Input:$a,InputGroup:Ba,InputGroupAppend:Na,InputGroupPrepend:Ga,Label:ja,Listing:G,ListingCustomizeColumns:za,ListingFilters:Ka,ListingHeaderCell:Wa,ListingPagination:Ja,ListingPresets:Xa,ListingPresetTrigger:qa,ListingRowActions:Qa,ListingSearch:Ya,ListingTable:Za,ListingTableBody:ei,ListingTableHead:ti,ListingToggleAll:ri,LivePreview:ai,LivePreviewPopout:ii,Modal:ni,ModalClose:oi,ModalTitle:li,Pagination:si,Panel:di,PanelFooter:ci,PanelHeader:ui,Popover:mi,PublishComponents:pi,PublishContainer:j,publishContextKey:gi,injectPublishContext:fi,PublishField:vi,PublishFields:Si,PublishFieldsProvider:hi,PublishForm:Ci,PublishLocalizations:bi,PublishSections:yi,PublishTabs:z,Radio:R,RadioGroup:K,Select:Ti,Separator:Pi,Slider:wi,Skeleton:xi,SplitterGroup:Ri,SplitterPanel:_i,SplitterResizeHandle:ki,StatusIndicator:W,Subheading:Ai,Switch:Ei,TabContent:Ii,Stack:Mi,StackClose:Di,StackHeader:Li,StackFooter:Ui,StackContent:Fi,Table:Hi,TableCell:Vi,TableColumn:Oi,TableColumns:$i,TableRow:Bi,TableRows:Ni,TabList:Gi,TabProvider:ji,Tabs:zi,TabTrigger:Ki,Textarea:Wi,TimePicker:Ji,ToggleGroup:Xi,ToggleItem:qi,Widget:Qi,registerIconSet:Yi,registerIconSetFromStrings:Zi}=__STATAMIC__.ui,J={class:"max-w-6xl mx-auto"},X={class:"flex items-center gap-2"},q=["href"],Q=["href"],Y={key:1,class:"p-8 text-center text-gray-500"},Z={__name:"Index",props:{title:String,redirects:Array,columns:Array,createUrl:String,reorderUrl:String,actionUrl:String},setup(a){const s=a,d=p(!1),c=p(null);function w(i){c.value=i}async function h(){if(!c.value)return;const i=c.value.map(n=>n.id);try{if(!(await fetch(s.reorderUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":Statamic.$config.get("csrfToken")},body:JSON.stringify({order:i})})).ok)throw new Error("Failed to save order");Statamic.$toast.success(__("simple-redirects::messages.redirects_reordered")),d.value=!1,c.value=null,S.reload()}catch(n){Statamic.$toast.error(__("simple-redirects::messages.order_save_failed")),console.error("Save order error:",n)}}function C(){d.value=!1,c.value=null,S.reload()}return(i,n)=>(m(),P(_,null,[t(e(E),{title:a.title},null,8,["title"]),T("div",J,[t(e(I),{title:a.title,icon:"moved"},{default:l(()=>[!d.value&&a.redirects.length>1?(m(),x(e(g),{key:0,onClick:n[0]||(n[0]=o=>d.value=!0),text:i.__("Reorder")},null,8,["text"])):y("",!0),d.value?(m(),P(_,{key:1},[t(e(g),{onClick:C,text:i.__("Cancel")},null,8,["text"]),t(e(g),{onClick:h,text:i.__("Save Order"),variant:"primary"},null,8,["text"])],64)):y("",!0),d.value?y("",!0):(m(),x(e(g),{key:2,text:i.__("Create Redirect"),href:a.createUrl,variant:"primary"},null,8,["text","href"]))]),_:1},8,["title"]),a.redirects.length>0?(m(),x(e(G),{key:0,items:a.redirects,columns:a.columns,"action-url":a.actionUrl,"allow-search":!0,"allow-customizing-columns":!1,"allow-presets":!1,reorderable:d.value,sortable:!1,onReordered:w,onRefreshing:n[1]||(n[1]=o=>e(S).reload())},{"cell-source":l(({row:o,value:f})=>[T("div",X,[t(e(W),{status:o.enabled?"published":"draft"},null,8,["status"]),T("a",{href:o.edit_url,class:"slug-index-field"},v(f),9,q)])]),"cell-destination":l(({row:o,value:f})=>[T("a",{href:o.edit_url,class:"slug-index-field"},v(f),9,Q)]),"cell-type":l(({value:o})=>[t(e(A),null,{default:l(()=>[k(v(o),1)]),_:2},1024)]),"cell-status_code":l(({value:o})=>[t(e(A),null,{default:l(()=>[k(v(o),1)]),_:2},1024)]),"prepended-row-actions":l(({row:o})=>[t(e($),{text:i.__("Edit"),icon:"pencil",href:o.edit_url},null,8,["text","href"])]),_:1},8,["items","columns","action-url","reorderable"])):y("",!0),a.redirects.length?y("",!0):(m(),P("div",Y,[T("p",null,v(i.__("No redirects found.")),1),t(e(g),{text:i.__("Create your first redirect"),href:a.createUrl,variant:"primary",class:"mt-4"},null,8,["text","href"])]))])],64))}},ee="simple-redirects",te={__name:"Publish",props:{title:String,icon:String,blueprint:Object,values:Object,meta:Object,submitUrl:String,listingUrl:String,createAnotherUrl:String,editUrlTemplate:String,isCreating:{type:Boolean,default:!0}},setup(a){const s=a,d=L(),c=p(s.values),w=p(s.meta),h=p({}),C=p(!1),i=`${ee}.after_save`,n=p("listing");let o;U(()=>{n.value=d.proxy.$preferences.get(i)||"listing",o=Statamic.$keys.bindGlobal(["mod+s"],r=>{r.preventDefault(),f()})}),F(()=>o?.destroy()),H(n,r=>{r!==d.proxy.$preferences.get(i)&&(r==="listing"?d.proxy.$preferences.remove(i):d.proxy.$preferences.set(i,r))});async function f(){C.value=!0,h.value={};try{const r=await fetch(s.submitUrl,{method:s.isCreating?"POST":"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":Statamic.$config.get("csrfToken"),Accept:"application/json"},body:JSON.stringify(c.value)}),u=await r.json();if(!r.ok){if(r.status===422){h.value=u.errors||{},Statamic.$toast.error(u.message||__("simple-redirects::messages.validation_failed"));return}Statamic.$toast.error(__("simple-redirects::messages.save_failed"));return}const b=s.isCreating?__("simple-redirects::messages.redirect_created"):__("simple-redirects::messages.redirect_updated");Statamic.$toast.success(b),M(u)}finally{C.value=!1}}function M(r){if(Statamic.$dirty.remove(s.title),n.value==="create_another"){S.visit(s.createAnotherUrl);return}if(n.value==="continue_editing"){s.isCreating&&r.id&&S.visit(s.editUrlTemplate.replace("{id}",r.id));return}S.visit(s.listingUrl)}return(r,u)=>(m(),P(_,null,[t(e(E),{title:a.title},null,8,["title"]),t(e(I),{title:a.title,icon:a.icon},{default:l(()=>[t(e(V),null,{default:l(()=>[t(e(g),{variant:"primary",text:r.__("Save"),onClick:f,disabled:C.value},null,8,["text","disabled"]),t(e(O),{align:"end"},{trigger:l(()=>[t(e(g),{variant:"primary",icon:"chevron-down","aria-label":r.__("Save options")},null,8,["aria-label"])]),default:l(()=>[t(e(N),null,{default:l(()=>[t(e(B),{id:"after-saving-label",textContent:v(r.__("After Saving"))},null,8,["textContent"]),t(e(K),{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=b=>n.value=b),"aria-labelledby":"after-saving-label"},{default:l(()=>[t(e(R),{label:r.__("Go To Listing"),value:"listing"},null,8,["label"]),t(e(R),{label:r.__("Continue Editing"),value:"continue_editing"},null,8,["label"]),t(e(R),{label:r.__("Create Another"),value:"create_another"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","icon"]),t(e(j),{name:a.title,blueprint:a.blueprint,meta:w.value,errors:h.value,modelValue:c.value,"onUpdate:modelValue":u[1]||(u[1]=b=>c.value=b)},{default:l(()=>[t(e(z))]),_:1},8,["name","blueprint","meta","errors","modelValue"])],64))}};Statamic.booting(()=>{Statamic.$inertia.register("simple-redirects::Index",Z),Statamic.$inertia.register("simple-redirects::Publish",te)});
